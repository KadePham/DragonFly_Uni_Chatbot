# Admin Menu - CÃ¡ch Truy Cáº­p CÃ¡c Chá»©c NÄƒng Admin

## âœ… Giá» Admin CÃ³ Thá»ƒ Truy Cáº­p:

### 1. **Admin Inbox** ğŸ“©
- Xem táº¥t cáº£ tin nháº¯n chÆ°a tráº£ lá»i tá»« users

### 2. **Admin Dashboard** âš™ï¸
- Chat trá»±c tiáº¿p vá»›i user
- Giáº£i Ä‘Ã¡p cÃ¢u há»i cá»§a user

### 3. **Admin Settings** ğŸ‘¨â€ğŸ’¼
- Set role cho user (user â†’ admin, admin â†’ user)

### 4. **Help Chat** ğŸ’¬
- Chat há»— trá»£ vá»›i admin (náº¿u admin cÅ©ng cáº§n help)

---

## ğŸš€ CÃ¡ch Sá»­ Dá»¥ng:

### BÆ°á»›c 1: Login vá»›i admin account
```
Email: ocheo@gmail.com
Password: (your password)
```

### BÆ°á»›c 2: Má»Ÿ Menu (3 dáº¥u cháº¥m gÃ³c trÃªn)
```
Profile â†’ Menu
```

### BÆ°á»›c 3: Tháº¥y Menu Admin
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Oc Heo                    â”‚
â”‚  @ocheo                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ NÃ¢ng cáº¥p gÃ³i                â”‚
â”‚ CÃ¡ nhÃ¢n hÃ³a                 â”‚
â”‚ CÃ i Ä‘áº·t                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“© Admin Inbox              â”‚ â† NEW! Click Ä‘á»ƒ xem inbox
â”‚ âš™ï¸ Admin Dashboard          â”‚ â† NEW! Click Ä‘á»ƒ chat vá»›i user
â”‚ ğŸ‘¨â€ğŸ’¼ Set Role               â”‚ â† NEW! Click Ä‘á»ƒ set role
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Trá»£ giÃºp (Help)            â”‚
â”‚ ÄÄƒng xuáº¥t                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“‹ Chi Tiáº¿t Tá»«ng Chá»©c NÄƒng:

### 1ï¸âƒ£ Admin Inbox

**Click "ğŸ“© Admin Inbox"**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Tin nháº¯n chÆ°a tráº£ lá»i       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                              â”‚
â”‚ User 1: "Help please"       â”‚
â”‚ User 2: "Question..."       â”‚
â”‚ User 3: "Issue about..."    â”‚
â”‚                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**CÃ¡ch dÃ¹ng:**
- Click user â†’ Má»Ÿ AdminDashboardActivity
- Xem tin nháº¯n
- Gá»­i reply
- Tá»± Ä‘á»™ng update inbox

---

### 2ï¸âƒ£ Admin Dashboard

**KhÃ´ng cáº§n click trá»±c tiáº¿p!**
- Tá»« Admin Inbox â†’ Click user â†’ Tá»± Ä‘á»™ng má»Ÿ Dashboard
- Hoáº·c cÃ³ thá»ƒ add Intent vÃ o Menu sau

**Giao diá»‡n:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ User: John Doe              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                              â”‚
â”‚ "Hi, can you help?"         â”‚
â”‚                    12:30     â”‚
â”‚                              â”‚
â”‚         "Sure! What's up?"  â”‚
â”‚              12:31          â”‚
â”‚                              â”‚
â”‚ [Type message...]    [Send] â”‚
â”‚                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 3ï¸âƒ£ Admin Settings (Set Role)

**Click "ğŸ‘¨â€ğŸ’¼ Set Role"**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Set User Role                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Email:                       â”‚
â”‚ [user@gmail.com          ]   â”‚
â”‚                              â”‚
â”‚ Role:                        â”‚
â”‚ [User      â–¼              ]  â”‚
â”‚ [Admin        ]              â”‚
â”‚                              â”‚
â”‚ [Get Role            ]       â”‚
â”‚ [Set Role            ]       â”‚
â”‚                              â”‚
â”‚ Result:                      â”‚
â”‚ Email: user@gmail.com        â”‚
â”‚ Role: user â†’ admin           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**CÃ¡ch dÃ¹ng:**
1. Nháº­p email user
2. Click "Get Role" â†’ xem role hiá»‡n táº¡i
3. Chá»n role má»›i tá»« dropdown
4. Click "Set Role" â†’ Update
5. Done! User sáº½ cÃ³ role má»›i

---

### 4ï¸âƒ£ Help Chat (For Admin)

**Click "Trá»£ giÃºp"** â†’ HelpActivity
- Admin cÃ³ thá»ƒ chat support
- Hoáº·c user thÆ°á»ng cÃ³ thá»ƒ chat admin

---

## âœ¨ Workflow HoÃ n Chá»‰nh:

### NgÃ y 1: Setup Admin
```
1. Signup: ocheo@gmail.com
2. Login
3. ensureUserExists() tá»± Ä‘á»™ng set role = admin
4. Menu sáº½ hiá»ƒn thá»‹ admin items
```

### NgÃ y 2+: Use Admin Features
```
1. Login: ocheo@gmail.com
2. Má»Ÿ Menu (Profile)
3. Click "ğŸ“© Admin Inbox" â†’ Xem tin chÆ°a tráº£ lá»i
4. Click user â†’ Chat vá»›i user (AdminDashboard)
5. Gá»­i reply
6. DÃ¹ng "ğŸ‘¨â€ğŸ’¼ Set Role" Ä‘á»ƒ promot user lÃªn admin náº¿u cáº§n
```

---

## ğŸ¯ Key Points:

âœ… Menu admin chá»‰ hiá»ƒn thá»‹ náº¿u `isAdmin() == true`  
âœ… Admin cÃ³ thá»ƒ gá»­i message, user sáº½ cÃ³ `senderRole = "admin"`  
âœ… Admin cÃ³ thá»ƒ set role cho user: user â†’ admin  
âœ… Admin cÃ³ thá»ƒ downgrade admin â†’ user  
âœ… Táº¥t cáº£ update lÆ°u á»Ÿ Firestore + Realtime DB  

---

## ğŸ”’ Báº£o Máº­t:

âœ… Chá»‰ admin má»›i tháº¥y admin menu  
âœ… Chá»‰ admin má»›i cÃ³ thá»ƒ set role (Firestore rules check)  
âœ… User khÃ´ng thá»ƒ change role cá»§a mÃ¬nh  
âœ… Default admin "ocheo@gmail.com" luÃ´n lÃ  admin  

---

## âš ï¸ LÆ°u Ã:

1. **Pháº£i deploy Firestore rules** trÆ°á»›c khi set role!
   ```bash
   firebase deploy --only firestore:rules
   ```

2. **isAdmin() check 2 Ä‘iá»u:**
   - Email == "ocheo@gmail.com" (hardcoded)
   - Role == "admin" (tá»« Firestore)

3. **Menu items sáº½ tá»± Ä‘á»™ng hide** náº¿u user khÃ´ng pháº£i admin

---

## ğŸ“ Checklist:

- âœ… 3 admin menu items thÃªm vÃ o dialog_profile.xml
- âœ… ProfileBottomSheet.kt xá»­ lÃ½ click
- âœ… Auto show/hide dá»±a trÃªn isAdmin()
- âœ… Integrate vá»›i AdminInboxActivity, AdminSettingsActivity
- âš ï¸ Firestore rules pháº£i deploy!

**Giá» báº¡n cÃ³ thá»ƒ truy cáº­p táº¥t cáº£ chá»©c nÄƒng admin!** ğŸ‰

